### **Kubernetes Deployment Strategies**  

Kubernetes offers various deployment strategies to ensure smooth application updates with minimal downtime. Here are the key strategies:  

---

### **1ï¸âƒ£ Rolling Update (Most Common)**
âœ… Updates pods gradually, replacing old ones with new ones.  
âœ… Ensures **zero downtime** by keeping some old pods running until new ones are ready.  
âœ… Best for **regular updates** with minimal risk.  

**Command:**  
```sh
kubectl set image deployment/myapp myapp=myimage:v2
```

---
n Kubernetes, I keep two Deployments â€“ Blue (current) and Green (new). The Service initially sends traffic to Blue. 
I deploy Green, test it, and then just change the Service selector from Blue to Green.
This switches traffic with zero downtime. If thereâ€™s an issue, I simply point the Service back to Blue.â€



â€œIn Kubernetes, a Rolling Update happens by changing the Deployment image. Kubernetes replaces old Pods with 
new ones gradually using maxUnavailable and maxSurge. I usually run kubectl set image to trigger it,
and if needed rollback with kubectl rollout undo.â€



### **2ï¸âƒ£ Blue-Green Deployment**  
âœ… Runs **two environments** (Blue = old, Green = new).  
âœ… Switches traffic from Blue to Green once testing is complete.  
âœ… Ensures **instant rollback** in case of failure.  
âœ… Requires **extra resources** (double environment).  

2 Deployments: app-blue, app-green

2 Services: svc-blue, svc-green

1 Ingress: Routes to either Blue or Green

Optional: add a header-based routing for testing

**Example Workflow:**  
- Deploy `v2` alongside `v1`.  
- Test `v2` internally.  
- Switch traffic to `v2`.  
- Delete `v1` once stable.  

---

### **3ï¸âƒ£ Canary Deployment**  
âœ… Gradually shifts traffic from old version to new version.  
âœ… **Low risk**, as only a small percentage of users see the new version initially.  
âœ… Used with **traffic splitting tools like Istio or Nginx**.  

**Example Traffic Distribution:**  
- 10% users â†’ `v2`, 90% users â†’ `v1`.  
- Monitor errors.  
- Slowly shift 50% â†’ 100% to `v2`.  

---

### **4ï¸âƒ£ Recreate Deployment**  
âœ… **Stops all old pods before deploying new ones**.  
âœ… Causes **downtime** but is simple and fast.  
âœ… Best for **major changes** where keeping old pods is risky.  

**Command:**  
```yaml
strategy:
  type: Recreate
```

---

### **5ï¸âƒ£ A/B Testing**  
âœ… Deploys different app versions to **specific user groups**.  
âœ… Ideal for testing new features **on selected users** before full rollout.  
âœ… Requires advanced **traffic management (e.g., Istio, Nginx, or custom logic)**.  

---

### **6ï¸âƒ£ Shadow Deployment**  
âœ… **Clones real traffic** to a new version **without affecting users**.  
âœ… Used for testing **performance & bugs** in production-like environments.  
âœ… Ideal for **AI models, fraud detection systems, or high-risk updates**.  

---

### **Which Strategy Should You Use?**  
- **Rolling Update** â†’ Default, minimal risk, best for regular updates.  
- **Blue-Green** â†’ Safe & fast rollback but needs extra resources.  
- **Canary** â†’ Gradual rollout, good for new feature testing.  
- **Recreate** â†’ Quick reset but causes downtime.  
- **A/B Testing** â†’ User-targeted feature releases.  
- **Shadow** â†’ Testing without impacting real users.  

Would you like examples for any of these? ğŸ˜Š
